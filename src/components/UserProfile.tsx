import { useState } from "react";
import toast, { Toaster } from "react-hot-toast";
const UserProfile = () => {
    const[showProfile, setShowProfile] = useState(false);
    const userData= localStorage.getItem('loggedUser');
    const {user} = JSON.parse(userData as string);
    console.log('user',user.username);
    
    const handleProfile = () => {
        setShowProfile(!showProfile);
    }
    const handleLogout = () => {
        localStorage.removeItem('loggedUser');
        toast.success('Logout successfully');
        setTimeout(() => {
            window.location.href = '/login';

        }, 1000);
    }

    
    
  return (
    <div className="relative hidden sm:block" >
     <svg
     onClick={handleProfile}
     className="cursor-pointer"
     width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="0.4" d="M12 22.01C17.5228 22.01 22 17.5329 22 12.01C22 6.48716 17.5228 2.01001 12 2.01001C6.47715 2.01001 2 6.48716 2 12.01C2 17.5329 6.47715 22.01 12 22.01Z" fill="#292D32"></path> <path d="M12 6.93994C9.93 6.93994 8.25 8.61994 8.25 10.6899C8.25 12.7199 9.84 14.3699 11.95 14.4299C11.98 14.4299 12.02 14.4299 12.04 14.4299C12.06 14.4299 12.09 14.4299 12.11 14.4299C12.12 14.4299 12.13 14.4299 12.13 14.4299C14.15 14.3599 15.74 12.7199 15.75 10.6899C15.75 8.61994 14.07 6.93994 12 6.93994Z" fill="#292D32"></path> <path d="M18.7807 19.36C17.0007 21 14.6207 22.01 12.0007 22.01C9.3807 22.01 7.0007 21 5.2207 19.36C5.4607 18.45 6.1107 17.62 7.0607 16.98C9.7907 15.16 14.2307 15.16 16.9407 16.98C17.9007 17.62 18.5407 18.45 18.7807 19.36Z" fill="#292D32"></path> </g></svg> 
     {
        showProfile && <div className={`bg-gray-950 z-50 w-52 h-48 p-3 pt-4 absolute top-18 -right-12 rounded-md 
            transition-all duration-500 ease-out transform 
            ${showProfile ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-4'}`}>
        <div className="flex gap-2 mb-4">
            <svg version="1.1" id="USER" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 1800 1800" enable-background="new 0 0 1800 1800"  fill="#838181" stroke="#838181"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path fill="#838181" d="M899.996,13.388c-488.883,0-886.611,397.732-886.611,886.615c0,297.415,147.216,561.092,372.596,722.011 c14.883,10.622,30.131,20.758,45.673,30.469c101.1,63.151,215.747,106.507,338.525,124.601 c42.384,6.248,85.723,9.529,129.816,9.529c44.084,0,87.423-3.281,129.808-9.529c122.778-18.094,237.434-61.449,338.525-124.592 c15.542-9.711,30.799-19.855,45.682-30.478c225.389-160.919,372.604-424.596,372.604-722.011 C1786.615,411.12,1388.879,13.388,899.996,13.388z M899.996,1724.407c-163.127,0-315.337-47.626-443.461-129.704 c58.621-107.8,176.409-191.24,323.694-221.345v22.277l119.594,66.448l119.932-66.431v-22.295 c147.285,30.104,265.074,113.545,323.694,221.345C1215.324,1676.781,1063.118,1724.407,899.996,1724.407z M554.979,912.854 c-15.75-5.685-27.058-20.743-27.058-38.429c0-17.69,11.308-32.751,27.058-38.44v9.194V912.854z M1238.035,845.179v-8.769 c15.144,6.001,25.896,20.758,25.896,38.001c0,17.261-10.752,32.021-25.896,38.017V845.179z M1212.461,711.77 c-2.014,9.963-4.564,19.813-7.654,29.489c-61.936-32.053-146.322-67.303-235.16-79.466 c-155.131-21.218-168.833-29.74-183.829-73.174l-12.957-37.516l-29.723,26.291c-0.894,0.789-80.681,71.251-161.344,136.272 c-11.984-42.575-13.798-86.934-5.103-130.046c27.397-135.974,156.441-234.666,306.824-234.666c23.249,0,46.749,2.365,69.859,7.017 c85.297,17.195,159.218,63.936,208.153,131.617C1210.005,554.617,1228.081,634.235,1212.461,711.77z M608.063,845.179V817.6 v-56.933c55.635-44.597,111.831-92.696,143.719-120.336c30.452,47.001,85.592,56.964,210.67,74.073 c86.504,11.833,170.369,49.166,222.49,76.398V817.6v27.579v94.646c0,159.053-129.399,288.436-288.436,288.436 c-159.044,0-288.444-129.383-288.444-288.436V845.179z M833.33,1310.867V1275.4c20.489,3.853,41.586,5.962,63.177,5.962 c24.048,0,47.505-2.534,70.154-7.281v36.786v30.843v22.649l-66.796,36.995l-66.535-36.969v-22.676V1310.867z M1387.403,1564.451 c-68.34-121.537-201.975-214.22-367.649-245.175v-61.016c119.42-46.385,206.444-158.038,217.075-290.979 c45.291-6.708,80.194-45.742,80.194-92.871c0-43.972-30.399-80.88-71.265-91.081c8.175-19.678,14.536-40.158,18.745-61.06 c18.588-92.227-2.699-186.615-59.94-265.794c-56.781-78.533-142.27-132.711-240.705-152.558 c-26.547-5.354-53.57-8.062-80.343-8.062c-84.273,0-166.412,27.106-231.29,76.333c-66.301,50.303-111.619,121.676-127.595,200.942 c-13.13,65.121-6.196,132.494,20.021,194.854l5.997,14.245c-43.156,8.487-75.838,46.576-75.838,92.192 c0,47.533,35.52,86.844,81.383,93.041c10.909,135.439,101.083,248.828,224.035,293.486v58.325 c-165.679,30.955-299.3,123.638-367.641,245.175C208.383,1414.259,75.59,1172.364,75.59,900.003 c0-454.583,369.827-824.41,824.406-824.41s824.415,369.828,824.415,824.41C1724.41,1172.364,1591.608,1414.259,1387.403,1564.451z"></path> </g> </g></svg>     <p className="text-base font-semibold leading-none text-gray-900 dark:text-white">
            <a href="#">{user.username}</a>
        </p>
        </div>
        <div className=" flex gap-2 ">
            <svg version="1.1" width={24} height={24} id="MAIL" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 1800 1800" enable-background="new 0 0 1800 1800"  fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path fill="#838181" d="M531.087,344.727c0.247,0,0.492,0.033,0.739,0.033h453.558c16.819,0,30.444-13.625,30.444-30.436 c0-16.815-13.625-30.435-30.444-30.435H638.226H531.826c-16.811,0-30.44,13.62-30.44,30.435 C501.386,330.885,514.624,344.331,531.087,344.727z"></path> <path fill="#838181" d="M531.826,497.389h749.422c16.814,0,30.443-13.629,30.443-30.439c0-16.814-13.629-30.439-30.443-30.439 H531.826c-16.811,0-30.44,13.625-30.44,30.439C501.386,483.76,515.016,497.389,531.826,497.389z"></path> <path fill="#838181" d="M531.826,650.009h749.422c16.814,0,30.443-13.633,30.443-30.444c0-8.872-3.822-16.827-9.877-22.389 c-5.424-4.982-12.625-8.046-20.566-8.046H531.826c-7.938,0-15.143,3.064-20.567,8.046c-6.054,5.562-9.873,13.517-9.873,22.389 C501.386,636.376,515.016,650.009,531.826,650.009z"></path> <path fill="#838181" d="M1311.691,772.194c0-16.806-13.629-30.436-30.443-30.436H531.826c-16.811,0-30.44,13.629-30.44,30.436 c0,16.815,13.629,30.444,30.44,30.444h749.422C1298.063,802.638,1311.691,789.009,1311.691,772.194z"></path> <path fill="#838181" d="M1772.088,533.511c-2.481-3.422-5.691-6.4-9.603-8.622l-246.454-139.961v-82.389v-9.853 c-1.264-7.738-5.432-14.501-11.406-19.066l-49.465-42.835l-131.073-113.508l-61.889-53.596c-5.286-4.582-11.866-7.021-18.591-7.275 h-2.197H937.55h-66.904H383.746c-47.809,0-86.705,38.895-86.705,86.696V382.15L61.554,515.893 c-31.678,11.565-54.396,41.913-54.396,77.54v1067.543c0,45.554,37.064,82.618,82.622,82.618h1625.598 c45.558,0,82.623-37.064,82.623-82.618V593.433C1798,569.839,1788.002,548.583,1772.088,533.511z M1614.426,510.814l92.579,52.583 l-11.661,8.301l-179.313,127.664V571.698v-60.883v-55.873L1614.426,510.814z M1405.5,267.454h-132.895V152.361L1405.5,267.454z M357.922,571.698v-60.883v-93.226v-70.01V143.102c0-14.239,11.585-25.825,25.824-25.825h379.699H886.73h34.734h123.285h167.617 v180.296c0,16.631,13.483,30.11,30.119,30.11h212.674v22.668v70.015v90.448v60.883V742.7l-397.298,282.87l-50.781,36.148 l-18.591,13.241l-81.088,57.728l-81.093-57.728l-18.611-13.25l-50.782-36.155L357.922,741.483V571.698z M193.76,510.814 l103.281-58.649v58.649v60.883V698.14L119.448,571.698l-14.597-10.395L193.76,510.814z M68.036,1648.984V609.822l229.005,163.047 l60.88,43.344L710.7,1067.38l-8.372,7.58l-67.267,60.871L68.036,1648.984z M121.495,1682.723l604.294-546.892l35.693-32.304 l45.37,32.304l82.897,59.028c5.283,3.76,11.462,5.637,17.653,5.637c6.187,0,12.369-1.877,17.652-5.637l82.889-59.028l45.354-32.286 l35.686,32.286l604.311,546.892H121.495z M1737.119,1640.271l-557.41-504.439l-67.267-60.871l-8.359-7.563l351.077-249.962 l60.871-43.348l221.088-157.407V1640.271z"></path> </g> </g></svg>
            <p className="mb-3 text-sm font-normal text-white">
            <a href="#" className="hover:underline">{user.email}</a>
        </p>
        </div>
        <div className="mt-6 ">
           <button 
           onClick={handleLogout}
           className="text-white bg-slate-500 hover:bg-slate-400 px-6 py-1 rounded-sm flex gap-2">
           Logout
           <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M12 3.25C12.4142 3.25 12.75 3.58579 12.75 4C12.75 4.41421 12.4142 4.75 12 4.75C7.99594 4.75 4.75 7.99594 4.75 12C4.75 16.0041 7.99594 19.25 12 19.25C12.4142 19.25 12.75 19.5858 12.75 20C12.75 20.4142 12.4142 20.75 12 20.75C7.16751 20.75 3.25 16.8325 3.25 12C3.25 7.16751 7.16751 3.25 12 3.25Z" fill="#1C274C"></path> <path d="M16.4697 9.53033C16.1768 9.23744 16.1768 8.76256 16.4697 8.46967C16.7626 8.17678 17.2374 8.17678 17.5303 8.46967L20.5303 11.4697C20.8232 11.7626 20.8232 12.2374 20.5303 12.5303L17.5303 15.5303C17.2374 15.8232 16.7626 15.8232 16.4697 15.5303C16.1768 15.2374 16.1768 14.7626 16.4697 14.4697L18.1893 12.75H10C9.58579 12.75 9.25 12.4142 9.25 12C9.25 11.5858 9.58579 11.25 10 11.25H18.1893L16.4697 9.53033Z" fill="#1C274C"></path> </g></svg>
            </button> 
        </div>
     </div>
     }
       <Toaster position="top-center" reverseOrder={false}/>
    </div>
  )
}

export default UserProfile;
